<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Input and Button Example</title>
    <script>
		var gl_str = "";
		var gl_curStr = "";
		var xhr = new XMLHttpRequest();
		var key = "sk-jh4jgWMjfy6GK9Kjb1wkxbYK0ONmgm65O3xVK0VS1zpbp8Z7";
		const endpoint = 'https://api.chatanywhere.com.cn/v1/chat/completions';
		
		
					
        function handleButtonClick() {
			document.getElementById('textOutput').value = "等待回复...";
            // 获取输入框的值
            const inputValue = document.getElementById('textInput').value;
			gl_str = gl_str + inputValue + "\n";
			const jsonData = {
			  model: 'gpt-3.5-turbo',
			  messages: [{ role: 'user', content: inputValue }],
			};
			fetch(endpoint, {
			  method: 'POST',
			  headers: {
				'Content-Type': 'application/json',
				'Authorization': 'Bearer ' + key
			  },
			  body: JSON.stringify(jsonData)
			})
			  .then(response => response.json())
			  .then(data => {
				// 处理响应数据
				const chat = data.choices[0].message.content;
				console.log('解析的消息内容:', chat);
				
				document.getElementById('textOutput').value = chat;
			  })
			  .catch(error => {
				// 处理错误
				console.error('请求失败:', error);
			  });
			
		}	
    </script>
</head>
<body>

<style>
    .textarea-container {
        margin-bottom: 20px; /* 可以根据需要调整垂直间距 */
    }
	
	/* 设置 textarea 宽度为屏幕宽度的 80% */
	textarea {
		width: 100%; /* 相对于父容器宽度 */
		height: 50%; /* 设置为屏幕高度的一半 */
		min-height:300px;
		max-width: 500px; /* 设置最大宽度，防止在大屏幕上拉伸太宽 */
		resize: none; /* 禁用用户调整 textarea 大小 */
	}
</style>

<h1>Input and Button Example</h1>
<div class="textarea-container">
<label for="textInput">输入框：</label>
<input type="text" id="textInput" placeholder="在这里输入文字">

<button onclick="handleButtonClick()">确定</button>
</div>
<div class="textarea-container">
<textarea id="textOutput" readonly> </textarea>
</div>
<div>
<a href="pages/web1.html">Go to Another Page</a>
</div>

</body>
</html>
